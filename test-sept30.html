<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test September 30th Progression</title>
    <script src="env.js"></script>
</head>
<body>
    <h1>üóìÔ∏è Testing October 1st Progression</h1>
    <p>Simulating today as <strong>October 1, 2025</strong> (Day 1 of journey)</p>
    <p>Check browser console for detailed results</p>

    <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h3>Expected Results for October 1st:</h3>
        <ul>
            <li><strong>Days since start:</strong> 1 (Sept 30 = day 0, Oct 1 = day 1)</li>
            <li><strong>Real destinations:</strong> 4 (Maine, New Hampshire, Vermont, New York)</li>
            <li><strong>Mystery card:</strong> 5th card previewing Massachusetts</li>
            <li><strong>Total cards:</strong> 5</li>
        </ul>

        <h4>Progression Check:</h4>
        <p><strong>Sept 30 (Day 0):</strong> 3 real + 1 mystery = 4 cards</p>
        <p><strong>Oct 1 (Day 1):</strong> 4 real + 1 mystery = 5 cards ‚ú®</p>
    </div>

    <script>
        // Test the progression logic
        function testOct1Progression() {
            console.log('üß™ TESTING OCTOBER 1ST PROGRESSION');
            console.log('===================================');

            // Journey start date
            const journeyStart = new Date('2025-09-30');

            // Simulated current date (Oct 1st)
            const simulatedToday = new Date('2025-10-01');

            console.log(`üìÖ Journey start: ${journeyStart.toDateString()}`);
            console.log(`üìÖ Simulated today: ${simulatedToday.toDateString()}`);

            // Calculate days since start
            const daysSinceStart = Math.floor((simulatedToday - journeyStart) / (1000 * 60 * 60 * 24));
            console.log(`üìä Days since start: ${daysSinceStart}`);

            // Calculate destinations to show
            let destinationsToShow;
            if (daysSinceStart < 0) {
                destinationsToShow = 3;
                console.log(`üìÖ Before journey start - showing first 3 destinations`);
            } else if (daysSinceStart === 0) {
                destinationsToShow = 3;
                console.log(`üöÄ Journey start day! Showing 3 destinations`);
            } else {
                destinationsToShow = Math.min(3 + daysSinceStart, 50);
                console.log(`üìà Day ${daysSinceStart} of journey - showing ${destinationsToShow} destinations`);
            }

            // Test destinations list
            const testDestinations = [
                { id: 1, state: "Maine", name: "Cadillac Mountain", visitDate: "September 30, 2025" },
                { id: 2, state: "New Hampshire", name: "Mount Washington", visitDate: "October 1, 2025" },
                { id: 3, state: "Vermont", name: "Stowe Pinnacle", visitDate: "October 2, 2025" },
                { id: 4, state: "New York", name: "Whiteface Mountain", visitDate: "October 3, 2025" },
                { id: 5, state: "Massachusetts", name: "Mount Greylock", visitDate: "October 4, 2025" },
                { id: 6, state: "Connecticut", name: "Mount Frissell", visitDate: "October 5, 2025" }
            ];

            let filtered = testDestinations.slice(0, destinationsToShow);

            // Add Coming Soon mystery card
            if (window.ENABLE_COMING_SOON && destinationsToShow < 50 && filtered.length >= 1) {
                const nextDestinationIndex = destinationsToShow;
                const nextActualDestination = testDestinations[nextDestinationIndex];

                if (nextActualDestination) {
                    const comingSoonDestination = {
                        id: nextActualDestination.id,
                        state: "Coming Soon",
                        name: "Mystery Destination",
                        visitDate: "Soon",
                        description: "The next adventure awaits...",
                        isComingSoon: true
                    };

                    filtered.push(comingSoonDestination);

                    console.log(`üîÆ COMING SOON: Added mystery card #${filtered.length}`);
                    console.log(`   Next actual: ${nextActualDestination.state} - ${nextActualDestination.name}`);
                    console.log(`   Total cards: ${destinationsToShow} real + 1 mystery = ${filtered.length}`);
                }
            }

            console.log(`\nüìç Expected display for October 1st (${filtered.length} total cards):`);
            filtered.forEach((location, index) => {
                if (location.isComingSoon) {
                    console.log(`   ${index + 1}. üîÆ ${location.state} - ${location.name}`);
                } else {
                    console.log(`   ${index + 1}. ${location.state} - ${location.name} (${location.visitDate})`);
                }
            });

            console.log('\n‚úÖ PROGRESSION TEST RESULTS:');
            console.log(`Expected for Oct 1: 4 real destinations + 1 mystery = 5 cards`);
            console.log(`Actual result: ${filtered.filter(l => !l.isComingSoon).length} real + ${filtered.filter(l => l.isComingSoon).length} mystery = ${filtered.length} cards`);

            if (filtered.length === 5 && filtered.filter(l => !l.isComingSoon).length === 4) {
                console.log('üéâ SUCCESS! Progression working correctly');
            } else {
                console.log('‚ùå ISSUE: Progression not working as expected');
            }

            return filtered;
        }

        // Run test when page loads
        window.addEventListener('load', () => {
            console.log('üîß Environment configuration:');
            console.log('TRAVEL_CONFIG:', window.TRAVEL_CONFIG);
            console.log(`TEST_DATE_OVERRIDE: ${window.TEST_DATE_OVERRIDE}`);

            testOct1Progression();
        });
    </script>
</body>
</html>