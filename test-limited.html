<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Limited View</title>
    <script>
        // Environment variables for testing
        window.DAYS_TO_SHOW = 3; // Show next 3 days
        window.START_DATE_OVERRIDE = '2025-09-26'; // Fixed journey start: September 26, 2025 (journey beginning)
        window.ENABLE_LIMITED_VIEW = true; // Enable limited view
    </script>
</head>
<body>
    <h1>Limited View Test</h1>
    <p>Check browser console for filtering results</p>
    <p>Expected: Should show journey beginning + next 3 days from September 26, 2025</p>
    <p>Should include: Maine - Cadillac Mountain (Sept 26), New Hampshire - Mount Washington (Sept 27), Vermont - Stowe Pinnacle (Sept 28), New York - Whiteface Mountain (Sept 29)</p>
    <p><strong>This follows the original journey order: destinations #1, #2, #3, #4</strong></p>

    <script>
        // Parse visit date function (copied from main script)
        function parseVisitDate(visitDateString) {
            const [month, day, year] = visitDateString.replace(',', '').split(' ');
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                              'July', 'August', 'September', 'October', 'November', 'December'];
            const monthIndex = monthNames.indexOf(month);
            return new Date(parseInt(year), monthIndex, parseInt(day));
        }

        // Test the date parsing
        const testDates = [
            "September 26, 2025",
            "September 27, 2025",
            "September 28, 2025",
            "September 29, 2025"
        ];

        console.log('Testing date parsing:');
        testDates.forEach(dateStr => {
            const parsed = parseVisitDate(dateStr);
            console.log(`${dateStr} -> ${parsed.toDateString()}`);
        });

        // Test filtering with fixed journey start date (journey beginning)
        const journeyStart = new Date('2025-09-26');
        const startDate = new Date(journeyStart); // Fixed journey starting point
        const endDate = new Date(journeyStart);
        endDate.setDate(journeyStart.getDate() + 3); // Journey start + next 3 days

        console.log(`\nTesting range: ${startDate.toDateString()} to ${endDate.toDateString()}`);

        // Test dates around the journey beginning
        const allTestDates = [
            "September 25, 2025", // Should be excluded (day before journey start)
            "September 26, 2025", // JOURNEY START - should be included (marker #1 - Maine)
            "September 27, 2025", // Day 2 - should be included (marker #2 - New Hampshire)
            "September 28, 2025", // Day 3 - should be included (marker #3 - Vermont)
            "September 29, 2025", // Day 4 - should be included (marker #4 - New York)
            "September 30, 2025"  // Should be excluded (day 5 - Massachusetts)
        ];

        allTestDates.forEach(dateStr => {
            const visitDate = parseVisitDate(dateStr);
            const isInRange = visitDate >= startDate && visitDate <= endDate;
            console.log(`${dateStr}: ${isInRange ? '✅ INCLUDED' : '❌ EXCLUDED'}`);
        });
    </script>
</body>
</html>